{
  "few_shot_examples": "## Few-Shot Examples\n\n### Example 1: High Confidence WORKS_AT\n**Conversation:**\nmessage_id=msg_001 | author_id=12345 | 2024-01-15T10:23:00 | Alice: Just finished my first week at Google! Working as a SWE in the Cloud team\nmessage_id=msg_002 | author_id=67890 | 2024-01-15T10:24:30 | Bob: Congrats! How's the SF office?\n\n**Extraction:**\n```json\n{\n  \"facts\": [\n    {\n      \"type\": \"WORKS_AT\",\n      \"subject_id\": \"12345\",\n      \"object_label\": \"Google\",\n      \"attributes\": {\n        \"organization\": \"Google\",\n        \"role\": \"Software Engineer\",\n        \"location\": \"San Francisco\"\n      },\n      \"confidence\": 0.95,\n      \"evidence\": [\"msg_001\"],\n      \"timestamp\": \"2024-01-15T10:23:00Z\",\n      \"notes\": \"Speaker explicitly states current role and employer\"\n    }\n  ]\n}\n```\n\n---\n\n### Example 2: Medium Confidence LIVES_IN\n**Conversation:**\nmessage_id=msg_001 | author_id=22222 | 2024-02-01T14:01:00 | Dave: I'm in SoMa, where you thinking?\nmessage_id=msg_002 | author_id=11111 | 2024-02-01T14:02:00 | Carol: How about that new place on Market St?\n\n**Extraction:**\n```json\n{\n  \"facts\": [\n    {\n      \"type\": \"LIVES_IN\",\n      \"subject_id\": \"22222\",\n      \"object_label\": \"San Francisco\",\n      \"attributes\": {\n        \"location\": \"San Francisco\"\n      },\n      \"confidence\": 0.70,\n      \"evidence\": [\"msg_001\"],\n      \"timestamp\": \"2024-02-01T14:01:00Z\",\n      \"notes\": \"Being in SoMa implies likely residency but could be visiting\"\n    }\n  ]\n}\n```\n\n---\n\n### Example 3: STUDIED_AT Current Student\n**Conversation:**\nmessage_id=msg_001 | author_id=77777 | 2024-08-20T09:15:00 | Priya: First semester at Stanford MSCS starts today!\nmessage_id=msg_002 | author_id=88888 | 2024-08-20T09:16:12 | Jin: Congrats, what classes are you taking?\n\n**Extraction:**\n```json\n{\n  \"facts\": [\n    {\n      \"type\": \"STUDIED_AT\",\n      \"subject_id\": \"77777\",\n      \"object_label\": \"Stanford University\",\n      \"attributes\": {\n        \"institution\": \"Stanford University\",\n        \"degree_type\": \"MS\",\n        \"field_of_study\": \"Computer Science\",\n        \"status\": \"current\"\n      },\n      \"confidence\": 0.9,\n      \"evidence\": [\"msg_001\"],\n      \"timestamp\": \"2024-08-20T09:15:00Z\",\n      \"notes\": \"Explicit statement about starting MSCS this semester\"\n    }\n  ]\n}\n```\n\n---\n\n### Example 4: HAS_SKILL With Details\n**Conversation:**\nmessage_id=msg_001 | author_id=13579 | 2024-04-12T11:30:00 | Marco: I've been doing Kubernetes ops for 6 years now\u2014feel free to DM if clusters act up.\n\n**Extraction:**\n```json\n{\n  \"facts\": [\n    {\n      \"type\": \"HAS_SKILL\",\n      \"subject_id\": \"13579\",\n      \"object_label\": \"Kubernetes\",\n      \"attributes\": {\n        \"skill\": \"Kubernetes\",\n        \"proficiency_level\": \"expert\",\n        \"years_experience\": \"6\",\n        \"learning_status\": \"expert\"\n      },\n      \"confidence\": 0.9,\n      \"evidence\": [\"msg_001\"],\n      \"timestamp\": \"2024-04-12T11:30:00Z\",\n      \"notes\": \"Explicit tenure and offer to help indicates expertise\"\n    }\n  ]\n}\n```\n\n---\n\n### Example 5: WORKING_ON Side Project\n**Conversation:**\nmessage_id=msg_001 | author_id=24680 | 2024-03-05T21:04:00 | Lina: I'm building a mood-tracking app in Flutter with my partner\u2014started last month to learn mobile.\n\n**Extraction:**\n```json\n{\n  \"facts\": [\n    {\n      \"type\": \"WORKING_ON\",\n      \"subject_id\": \"24680\",\n      \"object_label\": \"Mood-tracking app\",\n      \"attributes\": {\n        \"project\": \"Mood-tracking app\",\n        \"role\": \"co-founder\",\n        \"start_date\": \"2024-02\",\n        \"project_type\": \"personal\",\n        \"collaboration_mode\": \"pair\"\n      },\n      \"confidence\": 0.85,\n      \"evidence\": [\"msg_001\"],\n      \"timestamp\": \"2024-03-05T21:04:00Z\",\n      \"notes\": \"Clear statement of active project and collaborators\"\n    }\n  ]\n}\n```\n\n---\n\n### Example 6: RELATED_TO Family\n**Conversation:**\nmessage_id=msg_001 | author_id=30303 | 2024-06-18T18:45:00 | Nora: My brother Liam (ID: 90909) just joined the server\u2014be nice!\n\n**Extraction:**\n```json\n{\n  \"facts\": [\n    {\n      \"type\": \"RELATED_TO\",\n      \"subject_id\": \"30303\",\n      \"object_id\": \"90909\",\n      \"object_label\": \"Liam\",\n      \"attributes\": {\n        \"relationship_type\": \"sibling\",\n        \"relationship_basis\": \"Explicit self-report 'my brother'\"\n      },\n      \"confidence\": 0.92,\n      \"evidence\": [\"msg_001\"],\n      \"timestamp\": \"2024-06-18T18:45:00Z\",\n      \"notes\": \"Direct declaration of sibling relationship\"\n    }\n  ]\n}\n```\n\n---\n\n### Example 7: ATTENDED_EVENT Speaker\n**Conversation:**\nmessage_id=msg_001 | author_id=51515 | 2024-05-12T10:22:00 | Omar: See you at PyCon Portland\u2014I'm giving a talk on asyncio this Friday!\n\n**Extraction:**\n```json\n{\n  \"facts\": [\n    {\n      \"type\": \"ATTENDED_EVENT\",\n      \"subject_id\": \"51515\",\n      \"object_label\": \"PyCon Portland\",\n      \"attributes\": {\n        \"event_name\": \"PyCon Portland\",\n        \"event_type\": \"conference\",\n        \"date\": \"2024-05-17\",\n        \"role\": \"speaker\",\n        \"format\": \"in-person\"\n      },\n      \"confidence\": 0.88,\n      \"evidence\": [\"msg_001\"],\n      \"timestamp\": \"2024-05-12T10:22:00Z\",\n      \"notes\": \"Speaker explicitly references conference and talk\"\n    }\n  ]\n}\n```\n\n---\n\n### Example 8: RECOMMENDS Tool\n**Conversation:**\nmessage_id=msg_001 | author_id=42424 | 2024-07-04T13:10:00 | Quinn: Highly recommend Linear for bug tracking\u2014best workflow I've tried, especially for async teams.\n\n**Extraction:**\n```json\n{\n  \"facts\": [\n    {\n      \"type\": \"RECOMMENDS\",\n      \"subject_id\": \"42424\",\n      \"object_label\": \"Linear\",\n      \"attributes\": {\n        \"target\": \"Linear\",\n        \"recommendation_strength\": \"strong\",\n        \"context\": \"bug tracking for async teams\",\n        \"reason\": \"best workflow I've tried\"\n      },\n      \"confidence\": 0.9,\n      \"evidence\": [\"msg_001\"],\n      \"timestamp\": \"2024-07-04T13:10:00Z\",\n      \"notes\": \"Explicit strong recommendation with context\"\n    }\n  ]\n}\n```\n\n---\n\n### Example 9: PLANS_TO Future Move\n**Conversation:**\nmessage_id=msg_001 | author_id=56565 | 2024-09-02T08:05:00 | Sam: Pretty sure I'm moving to Berlin next March\u2014visa paperwork is underway.\n\n**Extraction:**\n```json\n{\n  \"facts\": [\n    {\n      \"type\": \"PLANS_TO\",\n      \"subject_id\": \"56565\",\n      \"object_label\": \"Move to Berlin\",\n      \"attributes\": {\n        \"plan\": \"Move to Berlin\",\n        \"goal_type\": \"move\",\n        \"timeframe\": \"2025-03\",\n        \"confidence_level\": \"medium\"\n      },\n      \"confidence\": 0.65,\n      \"evidence\": [\"msg_001\"],\n      \"timestamp\": \"2024-09-02T08:05:00Z\",\n      \"notes\": \"Plan stated with ongoing paperwork but not finalized\"\n    }\n  ]\n}\n```\n\n---\n\n### Example 10: PREVIOUSLY Role History\n**Conversation:**\nmessage_id=msg_001 | author_id=67676 | 2024-04-22T19:45:00 | Tara: Before Stripe I spent 4 years at Shopify running payments ops, left in 2022 to try something new.\n\n**Extraction:**\n```json\n{\n  \"facts\": [\n    {\n      \"type\": \"PREVIOUSLY\",\n      \"subject_id\": \"67676\",\n      \"object_label\": \"Shopify\",\n      \"attributes\": {\n        \"fact_type\": \"WORKS_AT\",\n        \"object_label\": \"Shopify\",\n        \"start_date\": \"2018\",\n        \"end_date\": \"2022\",\n        \"transition_reason\": \"left to try something new\"\n      },\n      \"confidence\": 0.85,\n      \"evidence\": [\"msg_001\"],\n      \"timestamp\": \"2024-04-22T19:45:00Z\",\n      \"notes\": \"Past employment explicitly bounded with duration and reason\"\n    }\n  ]\n}\n```\n\n---\n\n### Example 11: PREFERS Workflow\n**Conversation:**\nmessage_id=msg_001 | author_id=78787 | 2024-03-14T17:12:00 | Uma: I prefer async standups in Notion over daily video calls\u2014lets me respond when I'm actually awake.\n\n**Extraction:**\n```json\n{\n  \"facts\": [\n    {\n      \"type\": \"PREFERS\",\n      \"subject_id\": \"78787\",\n      \"object_label\": \"Async standups in Notion\",\n      \"attributes\": {\n        \"preference_target\": \"Async standups in Notion\",\n        \"preference_category\": \"workflow\",\n        \"preference_strength\": \"strong\",\n        \"alternatives_considered\": \"daily video calls\",\n        \"reason\": \"respond when awake\"\n      },\n      \"confidence\": 0.8,\n      \"evidence\": [\"msg_001\"],\n      \"timestamp\": \"2024-03-14T17:12:00Z\",\n      \"notes\": \"Clear preference comparison\"\n    }\n  ]\n}\n```\n\n---\n\n### Example 12: BELIEVES Stance\n**Conversation:**\nmessage_id=msg_001 | author_id=80808 | 2024-05-30T12:20:00 | Victor: Remote-first teams outperform office setups if you invest in documentation\u2014I'm firmly in the support camp.\n\n**Extraction:**\n```json\n{\n  \"facts\": [\n    {\n      \"type\": \"BELIEVES\",\n      \"subject_id\": \"80808\",\n      \"object_label\": \"Remote-first teams outperform office setups\",\n      \"attributes\": {\n        \"stance\": \"support\",\n        \"conviction_strength\": \"high\",\n        \"reasoning\": \"if you invest in documentation\"\n      },\n      \"confidence\": 0.82,\n      \"evidence\": [\"msg_001\"],\n      \"timestamp\": \"2024-05-30T12:20:00Z\",\n      \"notes\": \"Explicit stance and reasoning\"\n    }\n  ]\n}\n```\n\n---\n\n### Example 13: ENJOYS Hobby\n**Conversation:**\nmessage_id=msg_001 | author_id=91919 | 2024-02-18T09:40:00 | Wren: Weekend climbing trips are my happy place\u2014try to get on the wall twice a week with the crew.\n\n**Extraction:**\n```json\n{\n  \"facts\": [\n    {\n      \"type\": \"ENJOYS\",\n      \"subject_id\": \"91919\",\n      \"object_label\": \"Rock climbing\",\n      \"attributes\": {\n        \"activity\": \"Rock climbing\",\n        \"enjoyment_level\": \"high\",\n        \"frequency\": \"twice a week\",\n        \"social_mode\": \"with_friends\"\n      },\n      \"confidence\": 0.85,\n      \"evidence\": [\"msg_001\"],\n      \"timestamp\": \"2024-02-18T09:40:00Z\",\n      \"notes\": \"Statements show repeated joyful activity\"\n    }\n  ]\n}\n```\n\n---\n\n### Example 14: EXPERIENCED Life Event\n**Conversation:**\nmessage_id=msg_001 | author_id=62626 | 2024-01-08T22:01:00 | Yara: Lost my voice at the Taylor Swift show last night\u2014still buzzing from it!\n\n**Extraction:**\n```json\n{\n  \"facts\": [\n    {\n      \"type\": \"EXPERIENCED\",\n      \"subject_id\": \"62626\",\n      \"object_label\": \"Taylor Swift concert\",\n      \"attributes\": {\n        \"event_type\": \"concert\",\n        \"event_date\": \"2024-01-07\",\n        \"impact_level\": \"high\",\n        \"current_stage\": \"recent\"\n      },\n      \"confidence\": 0.78,\n      \"evidence\": [\"msg_001\"],\n      \"timestamp\": \"2024-01-08T22:01:00Z\",\n      \"notes\": \"Firsthand account of significant event\"\n    }\n  ]\n}\n```\n\n---\n\n### Example 15: CURIOUS_ABOUT Topic\n**Conversation:**\nmessage_id=msg_001 | author_id=73737 | 2024-03-27T10:55:00 | Zane: Lately I'm super curious about regenerative agriculture\u2014any good starter reads?\n\n**Extraction:**\n```json\n{\n  \"facts\": [\n    {\n      \"type\": \"CURIOUS_ABOUT\",\n      \"subject_id\": \"73737\",\n      \"object_label\": \"Regenerative agriculture\",\n      \"attributes\": {\n        \"topic\": \"Regenerative agriculture\",\n        \"curiosity_level\": \"high\",\n        \"what_sparked_it\": \"looking for starter reads\",\n        \"exploration_status\": \"asking\"\n      },\n      \"confidence\": 0.8,\n      \"evidence\": [\"msg_001\"],\n      \"timestamp\": \"2024-03-27T10:55:00Z\",\n      \"notes\": \"Direct request for resources indicates active curiosity\"\n    }\n  ]\n}\n```\n\n---\n\n### Negative Example: Skip Sarcastic Preference\n**Conversation:**\nmessage_id=msg_001 | author_id=58585 | 2024-04-10T18:30:00 | Riley: Oh sure, I just *love* 4 a.m. pager duties.\n\n**Extraction:**\n```json\n{\n  \"facts\": []\n}\n```\n\n**Why skip?** Sarcasm indicates the opposite sentiment; no fact should be extracted.\n\n---\n\n### Negative Example: Uncertain Relationship\n**Conversation:**\nmessage_id=msg_001 | author_id=99991 | 2024-07-09T21:00:00 | Sky: Pretty sure Jamie might be my cousin? Family tree is a mess though.\n\n**Extraction:**\n```json\n{\n  \"facts\": []\n}\n```\n\n**Why skip?** Relationship is speculative and not confirmed.",
  "confidence_guidelines": "## Confidence Scoring Guidelines\n\n### 0.90 - 1.00: Very High Confidence\n- Primary source: Speaker states fact about themselves or firsthand experience\n- Explicit specifics: Includes concrete names, dates, or roles\n- Present-tense or recently confirmed\n- Examples: \"I'm giving the PyCon talk on Friday\" (ATTENDED_EVENT), \"I've been running K8s for 6 years\" (HAS_SKILL)\n\n### 0.75 - 0.89: High Confidence\n- Strong implication with limited ambiguity\n- Supported by contextual evidence or multiple statements\n- Subjective statements (preferences, beliefs) that are clearly owned by the speaker\n- Example: \"Weekend climbing trips are my happy place\" (ENJOYS)\n\n### 0.60 - 0.74: Moderate Confidence\n- Reasonable inference but some uncertainty (travel vs. residence, future plans)\n- Plans with active steps taken (visa paperwork) but not finalized\n- Third-party confirmations without speaker affirmation\n\n### 0.50 - 0.59: Guarded Confidence\n- Weak implication, hedged language, or ambiguous timeframe\n- Use for PLANS_TO when intent is tentative or conditional\n- Use for PREVIOUSLY when dates are approximate or incomplete\n\n### \u2264 0.49: Do Not Extract\n- Speculation, jokes, hypotheticals, questions without answers\n- Second-hand rumors or uncertain relationships\n\n### Modifiers\n- Subtract 0.2 if the statement is future intent without supporting action.\n- Subtract 0.2 if sarcasm, exaggeration, or uncertainty words (\"maybe\", \"probably\") appear.\n- Add 0.1 when multiple messages corroborate the same fact or others confirm.\n- Cap subjective facts (PREFERS, BELIEVES, DISLIKES, ENJOYS) at 0.85 unless multiple consistent mentions exist.\n\n### Evidence Expectations\n- Confidence \u2265 0.8 must include notes explaining reasoning.\n- Confidence \u2265 0.9 must list at least one message_id with the direct quote.\n- Use the message containing the statement as evidence; add supporting follow-ups if relevant.",
  "edge_case_guidance": "## Edge Case Handling\n\n### Relationships and Personal Context\n- Only emit RELATED_TO when the relationship is explicit (\"my sister\"). Skip guesses or unclear references.\n- For REMEMBERS, ensure the memory is described meaningfully; \"remember that thing\" without detail is insufficient.\n- WITNESSED requires firsthand language (\"I saw\", \"I watched\"). Second-hand accounts belong under BELIEVES or TALKS_ABOUT.\n\n### Plans vs. Reality\n- PLANS_TO facts default to \u22640.7 confidence unless there is concrete commitment (tickets booked, contracts signed).\n- Convert PLANS_TO into WORKS_AT/ATTENDED_EVENT/etc. only when the conversation states the plan happened.\n\n### Historical vs. Current\n- PREVIOUSLY covers past facts that are no longer true. Require an explicit end (\"used to\", \"left in 2022\").\n- If the same message also states current status, emit both (e.g., PREVIOUSLY + WORKS_AT).\n\n### Subjective Statements\n- BELIEVES, PREFERS, ENJOYS, DISLIKES, CARES_ABOUT rely on the speaker claiming the stance. Quotes or opinions about someone else should be ignored unless confirmed.\n- Sarcasm indicators (italics, \"lol\", obvious hyperbole) invalidate the statement.\n\n### Events and Attendance\n- ATTENDED_EVENT must include either a date reference or future/past tense clarity. Skip if someone merely asks about an event.\n- EXPERIENCED focuses on impactful life events; do not capture trivial mentions without significance.\n\n### Skills and Work\n- HAS_SKILL requires evidence of capability (experience length, offer to help, portfolio). Casual interest belongs in TALKS_ABOUT or CURIOUS_ABOUT.\n- WORKING_ON targets active efforts; if the project is discontinued (\"used to work on\"), prefer PREVIOUSLY with fact_type WORKING_ON.\n\n### Preferences and Avoidance\n- PREFERS/RECOMMENDS/AVOIDS should capture the object, reason, and comparison when available.\n- DISLIKES vs AVOIDS: AVOIDS implies behavior change; DISLIKES may still allow participation.\n\n### Values and Causes\n- CARES_ABOUT should include how the value manifests (donations, organizing). If absent, lower confidence or skip.\n- BELIEVES must include stance language (support/oppose). Neutral discussions belong in TALKS_ABOUT.\n\n### Memory and Curiosity\n- REMEMBERS should include emotional valence or significance if supplied; otherwise, treat as TALKS_ABOUT.\n- CURIOUS_ABOUT requires clear interest in learning more, not just acknowledging a topic exists."
}
